<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>t16_동적폼</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>    
    <script>
        'use strict';

        let newText = '';
        let idx = 0;

        // 1. 1개의 입력박스를 만든다.
        // function inputBox() {
        //     let newText = '<input type="text" name="product" id="product" class="form-control"/>';

        //     demo.innerHTML = newText;
        // }

        // 2. 버튼을 클릭할 때마다 입력 박스를 추가한다.
        // function inputBox() {
        //     newText += '<input type="text" name="product" id="product" class="form-control mb-3"/>';
        //     demo.innerHTML = newText;
        // }

        // 3. 버튼을 클릭할 때마다 입력 박스를 추가한다. (삭제 버튼 추가)
        // function inputBox() {
            //     newText += '<div class="input-group">'; // input group 처리
                //     newText += '<input type="text" name="product" id="product" class="form-control mb-3"/>';
                //     newText += '<div class="input-group-append">'; // 입력창 뒤에 삭제 버튼이 생기도록 처리
                    //     newText += '<input type="button" value="삭제" onclick="" class="btn btn-sm btn-danger mb-3"/>';
                    //     newText += '</div>';
                    //     newText += '</div>';
                    //     demo.innerHTML = newText;
                    // }

        // 3. 버튼을 클릭할 때마다 입력 박스를 추가한다. (삭제 버튼 추가) - 번호 추가
        function inputBox() {
            idx++;
            newText += '<div class="input-group" id="productBox'+idx+'">'; // input group 처리
            newText += idx + '.<input type="text" name="product" id="product'+idx+'"class="form-control mb-3"/>';
            newText += '<div class="input-group-append">'; // 입력창 뒤에 삭제 버튼이 생기도록 처리
            newText += '<input type="button" value="' + idx + '.삭제" onclick="deleteBox('+ idx +')" class="btn btn-sm btn-danger mb-3"/>';
            newText += '</div>';
            newText += '</div>';
            demo.innerHTML = newText;
        }

        // 동적폼 입력 상자 삭제하기
        function deleteBox(idx) {
            // alert(idx);
            // alert(idx + " : " + product)
            // let product = document.getElementById("product"+idx).value;
            // demo0.innerHTML = product;

            let productBox = "productBox" + idx; 
            let item = document.getElementById(productBox);
            item.parentNode.removeChild(item);

            // item.remove(item);
        }
    </script>
</head>
<body>
    <p><br/></p>
    <div class="container">
        <h2>입력창 추가 (동적폼)</h2>
        <form name="myfrom">
            <p>
                <input type="button" value="입력창 추가" onclick="inputBox()" class="btn btn-success mt-3 mr-3" />
                <input type="button" value="입력창 모두 제거" onclick="location.reload()" class="btn btn-danger mt-3" />
            </p>
            <hr/>
            <div id="demo0"></div>
            <hr/>
            <div id="demo"></div>
        </form>
        <!-- form태그를 밖으로 뺐다 -->
        </div>
</body>
</html>