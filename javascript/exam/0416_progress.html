<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>timeout</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>    
    <style>
        .custom-progress {
            width: 50%;
            height: 50px;
        }

        .progress-container {
            display: flex;
            align-items: center;
            position: relative;
        }

        .progress-text {
            font-size: large;
        }
        
        .timeout-text {
            color: red;
            text-align: center;
            font-size: large;
            
        }
    </style>
    <script>
        'use strict';

        // 전체를 100으로 설정
        let num = 100;
        let statusTime;

        function begin() {
            
            // 5씩 감소
            num -= 5;
            
            if(num > 0) {
                demo.innerHTML = `<div class="progress-container">
                                    <progress value=${num} max="100" class="custom-progress"></progress>
                                    <span class="progress-text"> &nbsp; ${num}</span>
                                    </div>`;
                statusTime = setTimeout(begin, 500);
            } else {
                demo.innerHTML = `<div class="progress-container">
                                    <progress value=${num} max="100" class="custom-progress"></progress>
                                    <span class="timeout-text"> &nbsp; 타임 아웃! 시간 초과되었습니다.</span>
                                    </div>`;
                clearTimeout(statusTime);
            }
        }
    </script>
</head>
<body>
    <p><br/></p>
    <div class="container">
        <h2>타임 아웃 체크</h2>
        <p>
            <input type="button" value="시작" onclick="begin()" class="btn btn-success mr-3"/>
            <input type="button" value="초기화" onclick="location.reload()" class="btn btn-danger"/>
        </p>
        <hr/>
        <div id="demo"></div>
    </div>
</body>
</html>